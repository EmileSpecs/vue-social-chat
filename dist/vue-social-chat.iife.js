var __defProp=Object.defineProperty,__hasOwnProp=Object.prototype.hasOwnProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,o)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,__assign=(e,t)=>{for(var o in t||(t={}))__hasOwnProp.call(t,o)&&__defNormalProp(e,o,t[o]);if(__getOwnPropSymbols)for(var o of __getOwnPropSymbols(t))__propIsEnum.call(t,o)&&__defNormalProp(e,o,t[o]);return e},VueSocialChat=function(e,t){"use strict";const o=t.defineComponent({name:"ListChat",props:{urlAsset:String,attendants:{type:Array,default:()=>[]}}}),n={class:"vsc-popup-body__list"},a={class:"vsc-popup-body__link-avatar"},s={class:"vsc-popup-body__link-info"};o.render=function(e,o,r,l,c,i){return t.openBlock(),t.createBlock("ul",n,[(t.openBlock(!0),t.createBlock(t.Fragment,null,t.renderList(e.attendants,((o,n)=>(t.openBlock(),t.createBlock("li",{key:`vsc-item-${n}`,class:"vsc-popup-body__list-item"},[t.createVNode("a",{href:o.href,rel:"noopener",target:"_blank",class:"vsc-popup-body__link","aria-label":`Contact ${o.name}, opens in a new window`},[t.createVNode("div",a,[t.createVNode("img",{src:o.avatar.src,alt:o.avatar.alt},null,8,["src","alt"]),t.createVNode("span",{class:"vsc-popup-body__link-avatar-brand",style:o.app?`background-image: url(${e.urlAsset}/logos/${o.app}.png)`:""},null,4)]),t.createVNode("div",s,[t.createVNode("span",{class:"vsc-popup-body__link-info__label",textContent:t.toDisplayString(o.label)},null,8,["textContent"]),t.createVNode("span",{class:"vsc-popup-body__link-info__name",textContent:t.toDisplayString(o.name)},null,8,["textContent"])])],8,["href","aria-label"])])))),128))])};const r=[...["input","select","button","textarea"].map((e=>`${e}:not([disabled])`)),"a[href]","video[controls]","audio[controls]",'[tabindex]:not([tabindex^="-"])','[contenteditable]:not([contenteditable="false"])'].join(",");var l=t.defineComponent({name:"FocusLoop",props:{disabled:{type:Boolean,default:!1},isVisible:{type:Boolean,default:!1}},setup(e){const o=t.ref(null),n=t.ref(!1),a=t.computed((()=>e.disabled?-1:0));function s(e){if(e){const e=l();e.length&&setTimeout((()=>e[0].focus()),200)}}function l(){const e=o.value.querySelectorAll(r);return e&&e.length?e:[]}return t.watch((()=>e.isVisible),s),t.onMounted((()=>s(e.isVisible||!0))),{focusLoopRef:o,getTabindex:a,handleFocusEnd:function(){const e=l();e.length&&e[0].focus()},handleFocusStart:function(){const e=l();if(e.length){const t=n.value?e.length-1:0;n.value=!0,e[t].focus()}}}}});const c={class:"vue-focus-loop"},i={ref:"focusLoopRef"};l.render=function(e,o,n,a,s,r){return t.openBlock(),t.createBlock("div",c,[t.createVNode("div",{tabindex:e.getTabindex,onFocus:o[1]||(o[1]=(...t)=>e.handleFocusStart&&e.handleFocusStart(...t))},null,40,["tabindex"]),t.createVNode("div",i,[t.renderSlot(e.$slots,"default")],512),t.createVNode("div",{tabindex:e.getTabindex,onFocus:o[2]||(o[2]=(...t)=>e.handleFocusEnd&&e.handleFocusEnd(...t))},null,40,["tabindex"])])};const p={whatsapp:"https://api.whatsapp.com/send?phone=%ph%&text=",messenger:"https://m.me/%ph%",telegram:"https://telegram.me/%ph%",viber:"viber://chat?number=%ph%",wechat:"weixin://dl/chat?%ph%",line:"https://line.me/R/oaMessage/%ph%/",twitter:"https://twitter.com/messages/compose?recipient_id=%ph%"};const u=t.defineComponent({name:"VueSocialChat",components:{ListChat:o,FocusLoop:l},props:{icon:{type:Boolean,default:!1},attendants:{type:Array,default:()=>[]},urlAssets:{type:String,default:"https://raw.githubusercontent.com/ktquez/vue-social-chat/master/src"},dir:{type:String,default:"ltr"}},computed:{ariaLabelButton(){return(this.show?"Close":"Open")+" social chat popup"},getAttendants(){return this.attendants.map((e=>{const t=e.app?p[e.app].replace("%ph%",e.number||e.id||e.username):e.href;return __assign(__assign({},e),{href:t})}))}},setup(e,{emit:o}){const n=t.ref(!1),a=t.ref(null),s=t.ref(null);function r(){if(n.value=!n.value,setTimeout((()=>s.value.blur()),500),!n)return o("close");o("open")}function l({target:e}){a.value.contains(e)||r()}function c({which:e}){27===e&&r()}function i(){document.removeEventListener("click",l),document.removeEventListener("keydown",c)}return t.onBeforeUnmount((()=>{i()})),t.watch(n,(e=>{if(!e)return i();document.addEventListener("click",l),document.addEventListener("keydown",c)})),{show:n,vscPopup:a,vscButton:s,togglePopup:r}}}),d={id:"vsc-popup-box",class:"vsc-popup-box"},h={class:"vsc-popup-header"},v={class:"vsc-popup-body"},b={class:"vsc-popup-footer"},f={class:"vsc-button-open"},m={class:"vsc-button-close"};return u.render=function(e,o,n,a,s,r){const l=t.resolveComponent("ListChat"),c=t.resolveComponent("FocusLoop");return t.openBlock(),t.createBlock(c,{disabled:!e.show},{default:t.withCtx((()=>[t.createVNode("div",{ref:"vscPopup",class:"vsc-popup",dir:e.dir},[t.createVNode(t.Transition,{name:"scale"},{default:t.withCtx((()=>[t.withDirectives(t.createVNode("div",d,[t.withDirectives(t.createVNode("div",h,[t.renderSlot(e.$slots,"header")],512),[[t.vShow,e.$slots.header]]),t.createVNode("div",v,[t.renderSlot(e.$slots,"body",{},(()=>[t.createVNode(l,{"url-asset":e.urlAssets,attendants:e.getAttendants},null,8,["url-asset","attendants"])]))]),t.withDirectives(t.createVNode("div",b,[t.renderSlot(e.$slots,"footer")],512),[[t.vShow,e.$slots.footer]])],512),[[t.vShow,e.show]])])),_:3}),t.createVNode("button",{ref:"vscButton",class:["vsc-popup-button vsc-popup-button--default",{"vsc-popup-button--no-icon":!e.icon,"vsc-button-showing":!e.show,"vsc-button-close-showing":e.show}],"aria-haspopup":"true","aria-controls":"vsc-popup-box","aria-expanded":e.show?"true":"false","aria-label":e.ariaLabelButton,title:e.ariaLabelButton,onClick:o[1]||(o[1]=(...t)=>e.togglePopup&&e.togglePopup(...t))},[t.withDirectives(t.createVNode("span",f,[t.renderSlot(e.$slots,"button",{open:e.show},(()=>[t.createVNode("img",{src:`${e.urlAssets}/icons/chat.svg`,alt:"chat icon","aria-hidden":"true"},null,8,["src"])]))],512),[[t.vShow,!e.show||!e.icon]]),t.withDirectives(t.createVNode("span",m,[t.renderSlot(e.$slots,"button-close",{},(()=>[t.createVNode("img",{src:`${e.urlAssets}/icons/close.svg`,alt:"close icon","aria-hidden":"true"},null,8,["src"])]))],512),[[t.vShow,e.show&&e.icon]])],10,["aria-expanded","aria-label","title"])],8,["dir"])])),_:3},8,["disabled"])},e.SocialChat=u,e.default=function(e){e.component("VueSocialChat",u)},Object.defineProperty(e,"__esModule",{value:!0}),e[Symbol.toStringTag]="Module",e}({},Vue);
