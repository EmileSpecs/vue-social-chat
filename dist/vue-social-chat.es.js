var t=Object.defineProperty,e=Object.prototype.hasOwnProperty,o=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,s=(e,o,n)=>o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n,a=(t,a)=>{for(var l in a||(a={}))e.call(a,l)&&s(t,l,a[l]);if(o)for(var l of o(a))n.call(a,l)&&s(t,l,a[l]);return t};import{defineComponent as l,openBlock as c,createBlock as r,Fragment as u,renderList as i,createVNode as p,toDisplayString as d,ref as h,computed as b,watch as v,onMounted as f,renderSlot as m,onBeforeUnmount as g,resolveComponent as y,withCtx as w,Transition as _,withDirectives as x,vShow as k}from"vue";const L=l({name:"ListChat",props:{urlAsset:String,attendants:{type:Array,default:()=>[]}}}),$={class:"vsc-popup-body__list"},C={class:"vsc-popup-body__link-avatar"},A={class:"vsc-popup-body__link-info"};L.render=function(t,e,o,n,s,a){return c(),r("ul",$,[(c(!0),r(u,null,i(t.attendants,((e,o)=>(c(),r("li",{key:`vsc-item-${o}`,class:"vsc-popup-body__list-item"},[p("a",{href:e.href,rel:"noopener",target:"_blank",class:"vsc-popup-body__link","aria-label":`Contact ${e.name}, opens in a new window`},[p("div",C,[p("img",{src:e.avatar.src,alt:e.avatar.alt},null,8,["src","alt"]),p("span",{class:"vsc-popup-body__link-avatar-brand",style:e.app?`background-image: url(${t.urlAsset}/logos/${e.app}.png)`:""},null,4)]),p("div",A,[p("span",{class:"vsc-popup-body__link-info__label",textContent:d(e.label)},null,8,["textContent"]),p("span",{class:"vsc-popup-body__link-info__name",textContent:d(e.name)},null,8,["textContent"])])],8,["href","aria-label"])])))),128))])};const F=[...["input","select","button","textarea"].map((t=>`${t}:not([disabled])`)),"a[href]","video[controls]","audio[controls]",'[tabindex]:not([tabindex^="-"])','[contenteditable]:not([contenteditable="false"])'].join(",");var S=l({name:"FocusLoop",props:{disabled:{type:Boolean,default:!1},isVisible:{type:Boolean,default:!1}},setup(t){const e=h(null),o=h(!1),n=b((()=>t.disabled?-1:0));function s(t){if(t){const t=a();t.length&&setTimeout((()=>t[0].focus()),200)}}function a(){const t=e.value.querySelectorAll(F);return t&&t.length?t:[]}return v((()=>t.isVisible),s),f((()=>s(t.isVisible||!0))),{focusLoopRef:e,getTabindex:n,handleFocusEnd:function(){const t=a();t.length&&t[0].focus()},handleFocusStart:function(){const t=a();if(t.length){const e=o.value?t.length-1:0;o.value=!0,t[e].focus()}}}}});const B={class:"vue-focus-loop"},E={ref:"focusLoopRef"};S.render=function(t,e,o,n,s,a){return c(),r("div",B,[p("div",{tabindex:t.getTabindex,onFocus:e[1]||(e[1]=(...e)=>t.handleFocusStart&&t.handleFocusStart(...e))},null,40,["tabindex"]),p("div",E,[m(t.$slots,"default")],512),p("div",{tabindex:t.getTabindex,onFocus:e[2]||(e[2]=(...e)=>t.handleFocusEnd&&t.handleFocusEnd(...e))},null,40,["tabindex"])])};const P={whatsapp:"https://api.whatsapp.com/send?phone=%ph%&text=",messenger:"https://m.me/%ph%",telegram:"https://telegram.me/%ph%",viber:"viber://chat?number=%ph%",wechat:"weixin://dl/chat?%ph%",line:"https://line.me/R/oaMessage/%ph%/",twitter:"https://twitter.com/messages/compose?recipient_id=%ph%"};const O=l({name:"VueSocialChat",components:{ListChat:L,FocusLoop:S},props:{icon:{type:Boolean,default:!1},attendants:{type:Array,default:()=>[]},urlAssets:{type:String,default:"https://raw.githubusercontent.com/ktquez/vue-social-chat/master/src"},dir:{type:String,default:"ltr"}},computed:{ariaLabelButton(){return(this.show?"Close":"Open")+" social chat popup"},getAttendants(){return this.attendants.map((t=>{const e=t.app?P[t.app].replace("%ph%",t.number||t.id||t.username):t.href;return a(a({},t),{href:e})}))}},setup(t,{emit:e}){const o=h(!1),n=h(null),s=h(null);function a(){if(o.value=!o.value,setTimeout((()=>s.value.blur()),500),!o)return e("close");e("open")}function l({target:t}){n.value.contains(t)||a()}function c({which:t}){27===t&&a()}function r(){document.removeEventListener("click",l),document.removeEventListener("keydown",c)}return g((()=>{r()})),v(o,(t=>{if(!t)return r();document.addEventListener("click",l),document.addEventListener("keydown",c)})),{show:o,vscPopup:n,vscButton:s,togglePopup:a}}}),j={id:"vsc-popup-box",class:"vsc-popup-box"},T={class:"vsc-popup-header"},V={class:"vsc-popup-body"},R={class:"vsc-popup-footer"},q={class:"vsc-button-open"},z={class:"vsc-button-close"};function I(t){t.component("VueSocialChat",O)}O.render=function(t,e,o,n,s,a){const l=y("ListChat"),u=y("FocusLoop");return c(),r(u,{disabled:!t.show},{default:w((()=>[p("div",{ref:"vscPopup",class:"vsc-popup",dir:t.dir},[p(_,{name:"scale"},{default:w((()=>[x(p("div",j,[x(p("div",T,[m(t.$slots,"header")],512),[[k,t.$slots.header]]),p("div",V,[m(t.$slots,"body",{},(()=>[p(l,{"url-asset":t.urlAssets,attendants:t.getAttendants},null,8,["url-asset","attendants"])]))]),x(p("div",R,[m(t.$slots,"footer")],512),[[k,t.$slots.footer]])],512),[[k,t.show]])])),_:3}),p("button",{ref:"vscButton",class:["vsc-popup-button vsc-popup-button--default",{"vsc-popup-button--no-icon":!t.icon,"vsc-button-showing":!t.show,"vsc-button-close-showing":t.show}],"aria-haspopup":"true","aria-controls":"vsc-popup-box","aria-expanded":t.show?"true":"false","aria-label":t.ariaLabelButton,title:t.ariaLabelButton,onClick:e[1]||(e[1]=(...e)=>t.togglePopup&&t.togglePopup(...e))},[x(p("span",q,[m(t.$slots,"button",{open:t.show},(()=>[p("img",{src:`${t.urlAssets}/icons/chat.svg`,alt:"chat icon","aria-hidden":"true"},null,8,["src"])]))],512),[[k,!t.show||!t.icon]]),x(p("span",z,[m(t.$slots,"button-close",{},(()=>[p("img",{src:`${t.urlAssets}/icons/close.svg`,alt:"close icon","aria-hidden":"true"},null,8,["src"])]))],512),[[k,t.show&&t.icon]])],10,["aria-expanded","aria-label","title"])],8,["dir"])])),_:3},8,["disabled"])};export default I;export{O as SocialChat};
