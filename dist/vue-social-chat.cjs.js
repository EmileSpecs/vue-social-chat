"use strict";var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,o=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,a=(t,o,n)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n,s=(e,s)=>{for(var r in s||(s={}))t.call(s,r)&&a(e,r,s[r]);if(o)for(var r of o(s))n.call(s,r)&&a(e,r,s[r]);return e};Object.defineProperty(exports,"__esModule",{value:!0}),exports[Symbol.toStringTag]="Module";var r=require("vue");const l=r.defineComponent({name:"ListChat",props:{urlAsset:String,attendants:{type:Array,default:()=>[]}}}),c={class:"vsc-popup-body__list"},i={class:"vsc-popup-body__link-avatar"},p={class:"vsc-popup-body__link-info"};l.render=function(e,t,o,n,a,s){return r.openBlock(),r.createBlock("ul",c,[(r.openBlock(!0),r.createBlock(r.Fragment,null,r.renderList(e.attendants,((t,o)=>(r.openBlock(),r.createBlock("li",{key:`vsc-item-${o}`,class:"vsc-popup-body__list-item"},[r.createVNode("a",{href:t.href,rel:"noopener",target:"_blank",class:"vsc-popup-body__link","aria-label":`Contact ${t.name}, opens in a new window`},[r.createVNode("div",i,[r.createVNode("img",{src:t.avatar.src,alt:t.avatar.alt},null,8,["src","alt"]),r.createVNode("span",{class:"vsc-popup-body__link-avatar-brand",style:t.app?`background-image: url(${e.urlAsset}/logos/${t.app}.png)`:""},null,4)]),r.createVNode("div",p,[r.createVNode("span",{class:"vsc-popup-body__link-info__label",textContent:r.toDisplayString(t.label)},null,8,["textContent"]),r.createVNode("span",{class:"vsc-popup-body__link-info__name",textContent:r.toDisplayString(t.name)},null,8,["textContent"])])],8,["href","aria-label"])])))),128))])};const u=[...["input","select","button","textarea"].map((e=>`${e}:not([disabled])`)),"a[href]","video[controls]","audio[controls]",'[tabindex]:not([tabindex^="-"])','[contenteditable]:not([contenteditable="false"])'].join(",");var d=r.defineComponent({name:"FocusLoop",props:{disabled:{type:Boolean,default:!1},isVisible:{type:Boolean,default:!1}},setup(e){const t=r.ref(null),o=r.ref(!1),n=r.computed((()=>e.disabled?-1:0));function a(e){if(e){const e=s();e.length&&setTimeout((()=>e[0].focus()),200)}}function s(){const e=t.value.querySelectorAll(u);return e&&e.length?e:[]}return r.watch((()=>e.isVisible),a),r.onMounted((()=>a(e.isVisible||!0))),{focusLoopRef:t,getTabindex:n,handleFocusEnd:function(){const e=s();e.length&&e[0].focus()},handleFocusStart:function(){const e=s();if(e.length){const t=o.value?e.length-1:0;o.value=!0,e[t].focus()}}}}});const h={class:"vue-focus-loop"},v={ref:"focusLoopRef"};d.render=function(e,t,o,n,a,s){return r.openBlock(),r.createBlock("div",h,[r.createVNode("div",{tabindex:e.getTabindex,onFocus:t[1]||(t[1]=(...t)=>e.handleFocusStart&&e.handleFocusStart(...t))},null,40,["tabindex"]),r.createVNode("div",v,[r.renderSlot(e.$slots,"default")],512),r.createVNode("div",{tabindex:e.getTabindex,onFocus:t[2]||(t[2]=(...t)=>e.handleFocusEnd&&e.handleFocusEnd(...t))},null,40,["tabindex"])])};const b={whatsapp:"https://api.whatsapp.com/send?phone=%ph%&text=",messenger:"https://m.me/%ph%",telegram:"https://telegram.me/%ph%",viber:"viber://chat?number=%ph%",wechat:"weixin://dl/chat?%ph%",line:"https://line.me/R/oaMessage/%ph%/",twitter:"https://twitter.com/messages/compose?recipient_id=%ph%"};const f=r.defineComponent({name:"VueSocialChat",components:{ListChat:l,FocusLoop:d},props:{icon:{type:Boolean,default:!1},attendants:{type:Array,default:()=>[]},urlAssets:{type:String,default:"https://raw.githubusercontent.com/ktquez/vue-social-chat/master/src"},dir:{type:String,default:"ltr"}},computed:{ariaLabelButton(){return(this.show?"Close":"Open")+" social chat popup"},getAttendants(){return this.attendants.map((e=>{const t=e.app?b[e.app].replace("%ph%",e.number||e.id||e.username):e.href;return s(s({},e),{href:t})}))}},setup(e,{emit:t}){const o=r.ref(!1),n=r.ref(null),a=r.ref(null);function s(){if(o.value=!o.value,setTimeout((()=>a.value.blur()),500),!o)return t("close");t("open")}function l({target:e}){n.value.contains(e)||s()}function c({which:e}){27===e&&s()}function i(){document.removeEventListener("click",l),document.removeEventListener("keydown",c)}return r.onBeforeUnmount((()=>{i()})),r.watch(o,(e=>{if(!e)return i();document.addEventListener("click",l),document.addEventListener("keydown",c)})),{show:o,vscPopup:n,vscButton:a,togglePopup:s}}}),m={id:"vsc-popup-box",class:"vsc-popup-box"},g={class:"vsc-popup-header"},w={class:"vsc-popup-body"},y={class:"vsc-popup-footer"},x={class:"vsc-button-open"},V={class:"vsc-button-close"};f.render=function(e,t,o,n,a,s){const l=r.resolveComponent("ListChat"),c=r.resolveComponent("FocusLoop");return r.openBlock(),r.createBlock(c,{disabled:!e.show},{default:r.withCtx((()=>[r.createVNode("div",{ref:"vscPopup",class:"vsc-popup",dir:e.dir},[r.createVNode(r.Transition,{name:"scale"},{default:r.withCtx((()=>[r.withDirectives(r.createVNode("div",m,[r.withDirectives(r.createVNode("div",g,[r.renderSlot(e.$slots,"header")],512),[[r.vShow,e.$slots.header]]),r.createVNode("div",w,[r.renderSlot(e.$slots,"body",{},(()=>[r.createVNode(l,{"url-asset":e.urlAssets,attendants:e.getAttendants},null,8,["url-asset","attendants"])]))]),r.withDirectives(r.createVNode("div",y,[r.renderSlot(e.$slots,"footer")],512),[[r.vShow,e.$slots.footer]])],512),[[r.vShow,e.show]])])),_:3}),r.createVNode("button",{ref:"vscButton",class:["vsc-popup-button vsc-popup-button--default",{"vsc-popup-button--no-icon":!e.icon,"vsc-button-showing":!e.show,"vsc-button-close-showing":e.show}],"aria-haspopup":"true","aria-controls":"vsc-popup-box","aria-expanded":e.show?"true":"false","aria-label":e.ariaLabelButton,title:e.ariaLabelButton,onClick:t[1]||(t[1]=(...t)=>e.togglePopup&&e.togglePopup(...t))},[r.withDirectives(r.createVNode("span",x,[r.renderSlot(e.$slots,"button",{open:e.show},(()=>[r.createVNode("img",{src:`${e.urlAssets}/icons/chat.svg`,alt:"chat icon","aria-hidden":"true"},null,8,["src"])]))],512),[[r.vShow,!e.show||!e.icon]]),r.withDirectives(r.createVNode("span",V,[r.renderSlot(e.$slots,"button-close",{},(()=>[r.createVNode("img",{src:`${e.urlAssets}/icons/close.svg`,alt:"close icon","aria-hidden":"true"},null,8,["src"])]))],512),[[r.vShow,e.show&&e.icon]])],10,["aria-expanded","aria-label","title"])],8,["dir"])])),_:3},8,["disabled"])},exports.SocialChat=f,exports.default=function(e){e.component("VueSocialChat",f)};
